const { createClient } = require("@supabase/supabase-js");

const client = createClient(
  "https://flysnlreqvqpafmefggt.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZseXNubHJlcXZxcGFmbWVmZ2d0Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MjQ0Mjk3NCwiZXhwIjoyMDg4MDE4OTc0fQ.TuHmXWSIEGwPU4RqjhpOB9xaNndghT62J-sIgIotAA8"
);

function toSlug(name) {
  return name.toLowerCase().replace(/[^a-z0-9]+/g, "-").replace(/(^-|-$)/g, "");
}

const toursData = [
  { name: "Harihar Fort Trek", image: "https://i.pinimg.com/1200x/b9/1b/c8/b91bc80f3aa632092ac9a03d494dd07c.jpg", duration: "1 Day / 2 Nights", description: "Scale the iconic rock-cut steps of Harihar Fort in Nashik. Includes lunch, dinner, breakfast, trek badge, and expert leadership.", price: 1666, price_display: "1,666 Rs/-", date: "28/02/2026", inclusions: ["Lunch","Dinner","Breakfast","Our Badge","Basic First Aid","Trek Lead Expertise"], itinerary_title: "Itinerary of Harihar Fort & Trimbakeshwar", itinerary_days: [{title:"Day 0 (28/02/2026) Saturday Night",items:["10:00 PM \u2013 Depart from Pune","4:00 AM \u2013 Reach Base village","4:00 \u2013 5:00 AM \u2013 Freshen up"]},{title:"Day 1 (29/02/2026)",items:["5:00 AM \u2013 Start trek","8:30 AM \u2013 Reach top","9:00 \u2013 10:00 AM \u2013 Explore","10:00 AM \u2013 Start descent","12:30 PM \u2013 Reach base","12:30 \u2013 1:30 PM \u2013 Breakfast / lunch"]}], itinerary_sections: [{title:"\u0950 Trimbakeshwar Visit",items:["1:45 PM \u2013 Depart for Trimbakeshwar","3:00 PM \u2013 Reach temple","3:00 \u2013 5:30 PM \u2013 Darshan"]},{title:"Kushavartakund",items:["5:30 PM \u2013 Darshan"]},{title:"Return to Pune",items:["5:30 PM \u2013 Start return","9:30 PM \u2013 Reach Pune"]}] },
  { name: "Katraj to Sinhagad", image: "https://i.pinimg.com/736x/6d/47/bd/6d47bd80a36689037f8e0177a2faea01.jpg", duration: "1 Day", description: "Traverse the legendary night trail from Katraj to Sinhagad Fort\u2014one of Pune\u2019s most popular endurance treks.", price: 444, price_display: "444 Rs/-", date: "07/03/2026", inclusions: ["Breakfast at Sinhagad","Trek Lead Expertise","Basic First Aid","Our Badge","Group Coordination"], itinerary_title: "Itinerary of Katraj to Sinhagad Night Trek", itinerary_days: [{title:"Day 0 (07/03/2026) Saturday Night",items:["11:00 PM \u2013 Assembly at Katraj","11:30 PM \u2013 Start night trek"]},{title:"Day 1 (08/03/2026)",items:["12:00 \u2013 2:00 AM \u2013 Trek through forest","2:00 AM \u2013 Rest stop","2:30 \u2013 5:00 AM \u2013 Continue trek","5:00 AM \u2013 Reach Sinhagad","5:30 AM \u2013 Sunrise view","6:00 \u2013 7:00 AM \u2013 Explore + breakfast","7:30 AM \u2013 Descend"]}] },
  { name: "Trimbakeshwar Visit", image: "https://i.pinimg.com/736x/74/23/44/742344aaf9cf59cd7d8560a8464d7074.jpg", duration: "2 Days / 1 Night", description: "A spiritual journey to the sacred Trimbakeshwar Jyotirlinga temple with full meals, hotel stay, and guided sightseeing.", price: 5555, price_display: "5,555 Rs/-", date: "14/03/2026", inclusions: ["Hotel Stay (1 Night)","Breakfast","Lunch","Dinner","Transport (AC Bus)","Guided Sightseeing","Basic First Aid"], itinerary_title: "Itinerary of Trimbakeshwar Spiritual Visit", itinerary_days: [{title:"Day 1 (14/03/2026)",items:["6:00 AM \u2013 Depart from Pune","9:30 AM \u2013 Reach Trimbakeshwar","10:00 AM \u2013 Temple Darshan","12:00 PM \u2013 Lunch","1:30 PM \u2013 Sightseeing","3:30 PM \u2013 Hotel check-in","7:00 PM \u2013 Dinner"]},{title:"Day 2 (15/03/2026)",items:["7:00 AM \u2013 Breakfast","8:00 AM \u2013 Brahmagiri Hill","10:30 AM \u2013 Check-out","11:00 AM \u2013 Depart for Pune","2:30 PM \u2013 Reach Pune"]}] },
  { name: "Rajmachi Fort Trek", image: "https://images.unsplash.com/photo-1702799464926-b5fb08efe25d?w=800&q=80", duration: "1 Day / 1 Night", description: "Camp under the stars at Rajmachi Fort with panoramic views of the Western Ghats, fireflies in season, and a community bonfire.", price: 1800, price_display: "1,800 Rs/-", date: "21/03/2026", inclusions: ["Dinner","Breakfast","Tent Stay (Camping)","Bonfire","Trek Lead Expertise","Basic First Aid","Our Badge"], itinerary_title: "Itinerary of Rajmachi Fort Trek & Camping", itinerary_days: [{title:"Day 1 (21/03/2026)",items:["3:00 PM \u2013 Assembly at Lonavala","3:30 PM \u2013 Transfer to base","4:00 PM \u2013 Start trek","6:30 PM \u2013 Reach campsite","7:00 PM \u2013 Set up tents","8:00 PM \u2013 Dinner","9:00 PM \u2013 Bonfire"]},{title:"Day 2 (22/03/2026)",items:["5:30 AM \u2013 Sunrise","6:00 AM \u2013 Explore forts","7:30 AM \u2013 Breakfast","8:30 AM \u2013 Descent","10:30 AM \u2013 Reach base","11:00 AM \u2013 Depart"]}] },
  { name: "Kalsubai Peak Trek", image: "https://images.unsplash.com/photo-1708867817468-9f7a7aaa0d50?w=800&q=80", duration: "1 Day / 1 Night", description: "Summit Maharashtra\u2019s highest peak at 1,646m. Iron ladders, rocky patches, and a breathtaking sunrise await.", price: 1200, price_display: "1,200 Rs/-", date: "28/03/2026", inclusions: ["Dinner","Breakfast","Transport from Pune","Trek Lead Expertise","Basic First Aid","Our Badge"], itinerary_title: "Itinerary of Kalsubai Peak Trek", itinerary_days: [{title:"Day 0 (28/03/2026)",items:["10:00 PM \u2013 Depart from Pune","2:00 AM \u2013 Reach base","2:00 \u2013 3:00 AM \u2013 Rest"]},{title:"Day 1 (29/03/2026)",items:["3:30 AM \u2013 Start trek","6:00 AM \u2013 Reach summit","6:00 \u2013 7:00 AM \u2013 Sunrise","7:00 AM \u2013 Descent","9:30 AM \u2013 Reach base","10:00 AM \u2013 Breakfast","11:00 AM \u2013 Depart","3:00 PM \u2013 Reach Pune"]}], itinerary_sections: [{title:"Highlights",items:["Iron ladders & rocky patches","Kalsubai Temple at summit","360\u00B0 panoramic view"]}] },
  { name: "Harishchandragad Trek", image: "https://images.unsplash.com/photo-1708589413212-cd22902e5caf?w=800&q=80", duration: "2 Days / 1 Night", description: "Explore the ancient Konkan Kada cliff, Kedareshwar cave temple, and lush green valleys.", price: 2200, price_display: "2,200 Rs/-", date: "04/04/2026", inclusions: ["Dinner","Breakfast","Lunch","Tent Stay (Camping)","Transport from Pune","Trek Lead Expertise","Basic First Aid","Our Badge"], itinerary_title: "Itinerary of Harishchandragad Trek", itinerary_days: [{title:"Day 1 (04/04/2026)",items:["5:00 AM \u2013 Depart from Pune","9:00 AM \u2013 Reach base","9:30 AM \u2013 Start trek","1:00 PM \u2013 Reach plateau","1:30 PM \u2013 Lunch","3:00 PM \u2013 Explore Konkan Kada","5:30 PM \u2013 Kedareshwar temple","7:00 PM \u2013 Dinner"]},{title:"Day 2 (05/04/2026)",items:["5:30 AM \u2013 Sunrise at Konkan Kada","7:00 AM \u2013 Breakfast","8:00 AM \u2013 Visit temples","9:30 AM \u2013 Descent","12:30 PM \u2013 Reach base","1:00 PM \u2013 Depart","5:00 PM \u2013 Reach Pune"]}] },
  { name: "Kedarkantha Trek", image: "https://images.unsplash.com/photo-1681045905442-3203fb0e6111?w=800&q=80", duration: "5 Days / 4 Nights", description: "A perfect winter trek in Uttarakhand through snow-laden trails, pine forests, and a stunning summit at 3,800m.", price: 7500, price_display: "7,500 Rs/-", date: "18/04/2026", inclusions: ["All Meals (Veg)","Tent Stay & Sleeping Bags","Trek Lead & Support Staff","First Aid & Oxygen Cylinder","Forest Permits","Our Badge","Campfire Every Night"], itinerary_title: "Itinerary of Kedarkantha Trek", itinerary_days: [{title:"Day 1 \u2013 Dehradun to Sankri",items:["6:00 AM \u2013 Depart","3:00 PM \u2013 Reach Sankri","4:00 PM \u2013 Briefing","7:00 PM \u2013 Dinner"]},{title:"Day 2 \u2013 Sankri to Juda Ka Talab",items:["8:00 AM \u2013 Start trek","1:00 PM \u2013 Reach Juda Ka Talab","2:00 PM \u2013 Lunch + camp"]},{title:"Day 3 \u2013 Summit Day",items:["3:00 AM \u2013 Summit push","7:00 AM \u2013 Reach summit","8:00 AM \u2013 Descent","2:00 PM \u2013 Reach camp"]},{title:"Day 4 \u2013 Hargaon to Sankri",items:["8:00 AM \u2013 Breakfast","9:00 AM \u2013 Descend","1:00 PM \u2013 Reach Sankri"]},{title:"Day 5 \u2013 Sankri to Dehradun",items:["7:00 AM \u2013 Depart","4:00 PM \u2013 Reach Dehradun"]}] },
  { name: "Triund Trek", image: "https://images.unsplash.com/photo-1601895912784-8774950a9089?w=800&q=80", duration: "2 Days / 1 Night", description: "Camp at the foothills of the Dhauladhar range in Himachal with stunning views of the Kangra Valley.", price: 3500, price_display: "3,500 Rs/-", date: "25/04/2026", inclusions: ["Dinner","Breakfast","Tent Stay & Sleeping Bags","Trek Lead Expertise","Basic First Aid","Our Badge","Campfire"], itinerary_title: "Itinerary of Triund Trek", itinerary_days: [{title:"Day 1 \u2013 McLeodganj to Triund",items:["9:00 AM \u2013 Assembly","9:30 AM \u2013 Start trek","1:00 PM \u2013 Reach Triund Top","1:30 PM \u2013 Lunch + camp","6:00 PM \u2013 Sunset","8:00 PM \u2013 Dinner + campfire"]},{title:"Day 2 \u2013 Triund to McLeodganj",items:["5:30 AM \u2013 Sunrise","7:00 AM \u2013 Breakfast","8:00 AM \u2013 Descent","10:30 AM \u2013 Reach McLeodganj"]}] },
  { name: "Valley of Flowers Trek", image: "https://images.unsplash.com/photo-1723871493526-79bfa8d9402e?w=800&q=80", duration: "6 Days / 5 Nights", description: "Walk through UNESCO-listed alpine meadows bursting with rare Himalayan wildflowers.", price: 8500, price_display: "8,500 Rs/-", date: "01/08/2026", inclusions: ["All Meals (Veg)","Guesthouse & Tent Stay","Trek Lead & Support Staff","First Aid & Oxygen Cylinder","Forest & National Park Permits","Our Badge","Porter/Mule Support"], itinerary_title: "Itinerary of Valley of Flowers Trek", itinerary_days: [{title:"Day 1 \u2013 Haridwar to Govindghat",items:["6:00 AM \u2013 Depart","5:00 PM \u2013 Reach Govindghat","6:00 PM \u2013 Dinner"]},{title:"Day 2 \u2013 Govindghat to Ghangaria",items:["7:00 AM \u2013 Start trek","3:00 PM \u2013 Reach Ghangaria","7:00 PM \u2013 Dinner"]},{title:"Day 3 \u2013 Valley of Flowers",items:["7:00 AM \u2013 Trek to Valley","9:00 AM \u2013 3:00 PM \u2013 Explore","4:00 PM \u2013 Return"]},{title:"Day 4 \u2013 Hemkund Sahib",items:["6:00 AM \u2013 Trek to Hemkund","10:00 AM \u2013 Visit Gurudwara","12:00 PM \u2013 Descent"]},{title:"Day 5 \u2013 Ghangaria to Govindghat",items:["7:00 AM \u2013 Descent","1:00 PM \u2013 Reach Govindghat"]},{title:"Day 6 \u2013 Govindghat to Haridwar",items:["6:00 AM \u2013 Depart","4:00 PM \u2013 Reach Haridwar"]}] },
];

const blogsData = [
  { title: "Into the Clouds: A First-Timer's Guide to Himalayan Treks", image: "https://images.unsplash.com/photo-1643984953314-8ca84ac57a49?w=800&q=80", tag: "HIMACHAL", category: "Destinations", date: "JAN 15, 2025", read_time: "8 MIN READ" },
  { title: "Fort Treks of the Sahyadris: History Beneath Your Feet", image: "https://images.unsplash.com/photo-1695210365465-f0c9839c362e?w=800&q=80", tag: "MAHARASHTRA", category: "Travel Stories", date: "FEB 02, 2025", read_time: "6 MIN READ" },
  { title: "Kedarkantha in Winter: Snow, Silence, and Summit Glory", image: "https://images.unsplash.com/photo-1681045905442-3203fb0e6111?w=800&q=80", tag: "UTTARAKHAND", category: "Destinations", date: "DEC 20, 2024", read_time: "10 MIN READ" },
  { title: "Pack Light, Trek Far: The Ultimate Gear Checklist for Beginners", image: "https://images.unsplash.com/photo-1601895912784-8774950a9089?w=800&q=80", tag: "TREK TIPS", category: "Trek Tips", date: "NOV 10, 2024", read_time: "5 MIN READ" },
];

async function seed() {
  const { data: existing } = await client.from("tours").select("id").limit(1);
  if (existing && existing.length > 0) {
    console.log("Already seeded, skipping");
    return;
  }

  const tourRows = toursData.map((t, i) => ({
    name: t.name, slug: toSlug(t.name), image: t.image, gallery: [], duration: t.duration,
    description: t.description, price: t.price, price_display: t.price_display, date: t.date || null,
    inclusions: t.inclusions || [], itinerary_title: t.itinerary_title || null,
    itinerary_days: t.itinerary_days || [], itinerary_sections: t.itinerary_sections || [],
    qr_image: null, is_active: true, sort_order: i,
  }));

  const { error: toursErr } = await client.from("tours").insert(tourRows);
  if (toursErr) { console.error("Tours error:", toursErr.message); return; }
  console.log("Tours seeded:", tourRows.length);

  const blogRows = blogsData.map((b, i) => ({
    title: b.title, image: b.image, tag: b.tag, category: b.category,
    date: b.date, read_time: b.read_time, is_active: true, sort_order: i,
  }));

  const { error: blogsErr } = await client.from("blogs").insert(blogRows);
  if (blogsErr) { console.error("Blogs error:", blogsErr.message); return; }
  console.log("Blogs seeded:", blogRows.length);

  console.log("Done!");
}

seed().catch(console.error);
